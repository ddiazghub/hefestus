import 'dart:async';

import 'package:flutter/material.dart';
import 'package:get/get.dart';
import 'package:hefestus/ui/controllers/map_controller.dart';
import 'package:hefestus/ui/controllers/place_picker_controller.dart';
import 'package:reactive_forms/reactive_forms.dart';

class PlacePicker extends GetView<PlacePickerController> {
  PlacePicker({super.key, required this.form});

  final FormGroup form;
  final MapController mapController = Get.find();
  Timer timer = Timer(const Duration(days: 10000), () {});

  Future<void> complete() async {
    String text = form.control('place').value;
    controller.completions = await mapController.complete(text);
    print(controller.completions);
  }

  @override
  Widget build(BuildContext context) {
    final theme = Theme.of(context);

    return Container(
      padding: const EdgeInsets.all(10),
      child: Column(
        children: [
Autocomplete(
  optionsBuilder: (TextEditingValue textEditingValue) {
    if (textEditingValue.text == '') {
      return const Iterable<String>.empty();
    }else{
        List<String> matches = <String>[];
        matches.addAll(suggestons);

        matches.retainWhere((s){
           return s.toLowerCase().contains(textEditingValue.text.toLowerCase());
        });
        return matches;
    }
  },
  
  onSelected: (String selection) {
      print('You just selected $selection');
  },
)
          ),
        ],
      ),
    );
  }
}
